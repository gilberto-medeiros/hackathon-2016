<!DOCTYPE html>
<html>
<head>
    <title>MMA Stars 2</title>
</head>
<body>
    <canvas id="gameCanvas" width="1024" height="768"></canvas>
    <script type="text/javascript" src="cocos2d-js-v3.12/cocos2d-js-v3.12.js" charset="UTF-8"></script>
    <script type="text/javascript">
          window.onload = function(){
              cc.game.onStart = function(){
                  //load resources
                  cc.LoaderScene.preload(["HelloWorld.png"], function () {
                      var MyScene = cc.Scene.extend({
                          onEnter:function () {
                              this._super();
                              var size = cc.director.getWinSize();
                              var sprite = cc.Sprite.create("HelloWorld.png");
                              sprite.setPosition(size.width / 2, size.height / 2);
                              sprite.setScale(0.8);
                              this.addChild(sprite, 0);

                              var label = cc.LabelTTF.create("Hello World", "Arial", 40);
                              label.setPosition(size.width / 2, size.height / 2);
                              this.addChild(label, 1);
                          }
                      });
                      cc.director.runScene(new MyScene());
                  }, this);
              };
              cc.game.run("gameCanvas");
          };
    </script>

    <ul id="messages"></ul>
    <form action="">
      <input id="m" autocomplete="off" /><button>Send</button>
    </form>
</body>
<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
<script src="//localhost:35729/livereload.js"></script>
<script>
  console.log('window is ' + window.location.origin);

  // Send messages to server
  var socket = io(window.location.origin + ":3000");
  $('form').submit(function(){
    socket.emit('chat message', $('#m').val());
    $('#m').val('');
    return false;
  });

  // get chat messages from server
  socket.on('chat message', function(msg){
    console.log('text');
    $('#messages').append($('<li>').text("x:"+msg));
  });

  // get generic state events from server
  socket.on('event', function(msg){
    console.log(msg);
    var p = new Polygon(100, 200);

    console.log(msg);
    $('#messages').append($('<li><b>').text("w"+msg.txt));
  });

  class Polygon {
    constructor(height, width) {
      this.height = height;
      this.width = width;
    }
  }
</script>
</html>
